.align-center.forms
  .column.small-12.medium-6
    %h1
      Welcome

    .login-text
      Create an account to start your project

    = form_for @user,
      as: resource_name,
      url: registration_path(resource_name),
      html: { onsubmit: "return validateRegistration();" } do |f|

      .row
        = f.fields_for :user_profile, UserProfile.new do |p|
          .text-field.small-6.columns
            = p.label :first_name
            = p.text_field :first_name,
              id: "user_first_name",
              onfocusout: "validatePresence('#user_first_name');"
            .error-message#user_first_name-error
          .text-field.small-5.columns
            = p.label :last_name
            = p.text_field :last_name,
              id: "user_last_name",
              onfocusout: "validatePresence('#user_last_name');"
            .error-message#user_last_name-error
      .row
        .text-field
          = f.label :email
          = f.email_field :email,
            id: "user_email",
            onfocusout: "validateEmail('#user_email');"
          .error-message#user_email-error
        .text-field
          = f.label :password
          = f.password_field :password,
            id: "user_password",
            onfocusout: "validatePassword('#user_password');"
          .error-message#user_password-error
        .text-field
          = f.label :password_confirmation
          = f.password_field :password_confirmation,
            id: "user_password_confirmation",
            onfocusout: "validatePassword('#user_password_confirmation');validatePasswordsMatch('#user_password', '#user_password_confirmation');"
          .error-message#user_password_confirmation-error

        / Role should be safe since it just determines views not security
        = f.fields_for :user_roles, UserRole.new do |r|
          = r.hidden_field :role_id, value: Role.find_by(name: "Employer").id

        .small-12.medium-3.columns.submit-field.last
          = f.submit "Continue",
            data: { disable_with: false }
